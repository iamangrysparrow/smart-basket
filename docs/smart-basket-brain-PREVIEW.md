# Smart Basket: Brain Module
## Preview Document v0.1

> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ‚, Ğ½Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾  
> **Ğ”Ğ°Ñ‚Ğ°:** Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ 2025  
> **Ğ¦ĞµĞ»ÑŒ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°ĞºÑƒĞ¿Ğ¾Ğº Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ² Ğ½Ğ° 99%

---

## 1. ĞĞ±Ñ‰Ğ°Ñ Ğ¸Ğ´ĞµÑ

ĞŸÑ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Smart Basket Ğ¸Ğ· "ÑƒÑ‡Ñ‘Ñ‚Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº" Ğ² "Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ğ¸Ğ»Ğ¾Ñ‚ Ğ·Ğ°ĞºÑƒĞ¿Ğ¾Ğº":

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚     â”‚                 â”‚     â”‚                 â”‚
â”‚  SMART BASKET   â”‚â”€â”€â”€â”€â–¶â”‚     BRAIN       â”‚â”€â”€â”€â”€â–¶â”‚    PARSERS      â”‚
â”‚                 â”‚     â”‚                 â”‚     â”‚                 â”‚
â”‚  Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:       â”‚     â”‚  â€¢ ĞĞ½Ğ°Ğ»Ğ¸Ğ·       â”‚     â”‚  â€¢ Samokat      â”‚
â”‚  â€¢ Ğ§ĞµĞºĞ¸         â”‚     â”‚  â€¢ ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ â”‚     â”‚  â€¢ Lavka        â”‚
â”‚  â€¢ Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹       â”‚     â”‚  â€¢ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â”‚     â”‚  â€¢ Kuper        â”‚
â”‚  â€¢ Ğ”Ğ°Ñ‚Ñ‹/Ñ†ĞµĞ½Ñ‹    â”‚     â”‚  â€¢ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ  â”‚     â”‚                 â”‚
â”‚                 â”‚     â”‚                 â”‚     â”‚  Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â€¢ ĞŸĞ¾Ğ¸ÑĞº        â”‚
                                                â”‚  â€¢ ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°      â”‚
                                                â”‚  â€¢ Ğ¡ÑÑ‹Ğ»ĞºĞ°       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:**

```
Ğ£Ñ‚Ñ€Ğ¾ Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸ĞºĞ°. Push Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½:

  "ğŸ›’ ĞŸĞ¾Ñ€Ğ° Ğ·Ğ°ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒÑÑ! ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ Ğ¸ ÑĞ¹Ñ†Ğ° Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ.
   Ğ•Ñ‰Ñ‘ 3 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸. ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº?"

ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:

  AI: Ğ’Ğ¾Ñ‚ Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ:
      â€¢ ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ 2.5% â€” 2Ğ» (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ½Ğ° 6 Ğ´Ğ½ĞµĞ¹, Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾ 5)
      â€¢ Ğ¯Ğ¹Ñ†Ğ° Ğ¡1 â€” 10ÑˆÑ‚ (Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ¸ÑÑŒ Ğ²Ñ‡ĞµÑ€Ğ°)
      â€¢ Ğ¥Ğ»ĞµĞ± â€” 1ÑˆÑ‚ (Ğ±ĞµÑ€Ñ‘ÑˆÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 3 Ğ´Ğ½Ñ)
      â€¢ ĞšĞ°Ñ€Ñ‚Ğ¾Ñ„ĞµĞ»ÑŒ â€” 2ĞºĞ³ (Ñ€Ğ°Ğ· Ğ² 2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
      â€¢ Ğ›ÑƒĞº â€” 0.5ĞºĞ³
      
      ĞœĞ¾Ğ¶ĞµÑ‚ ĞµÑ‰Ñ‘ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾?

Ğ¯: Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ ÑĞ¼ĞµÑ‚Ğ°Ğ½Ñƒ Ğ¸ Ğ¾Ğ³ÑƒÑ€Ñ†Ñ‹

  AI: Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾! Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°Ñ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹...
  
  AI: Ğ’ÑÑ‘ Ğ½Ğ°ÑˆÑ‘Ğ». Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ñ†ĞµĞ½Ğ° Ğ² Ğ¡Ğ°Ğ¼Ğ¾ĞºĞ°Ñ‚Ğµ â€” 1,247â‚½
      Ğ›Ğ°Ğ²ĞºĞ° Ñ‡ÑƒÑ‚ÑŒ Ğ´Ğ¾Ñ€Ğ¾Ğ¶Ğµ â€” 1,312â‚½
      
      [Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ Ğ¡Ğ°Ğ¼Ğ¾ĞºĞ°Ñ‚]
      [Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ Ğ›Ğ°Ğ²ĞºĞ°]

ĞšĞ»Ğ¸ĞºĞ°Ñ ÑÑÑ‹Ğ»ĞºÑƒ â†’ ĞĞ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°Ñ â†’ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾
```

---

## 2. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### 2.1 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
SmartBasket.sln
â”œâ”€â”€ SmartBasket.Core              # Ğ¡ÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸, Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹
â”œâ”€â”€ SmartBasket.Data              # EF Core, Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸  
â”œâ”€â”€ SmartBasket.Services          # Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚
â”œâ”€â”€ SmartBasket.Brain             # â† ĞĞĞ’Ğ«Ğ™ ĞœĞĞ”Ğ£Ğ›Ğ¬
â”‚   â”œâ”€â”€ Analysis/
â”‚   â”‚   â””â”€â”€ ConsumptionAnalyzer.cs
â”‚   â”œâ”€â”€ Prediction/
â”‚   â”‚   â””â”€â”€ ReplenishmentPredictor.cs
â”‚   â”œâ”€â”€ Planning/
â”‚   â”‚   â”œâ”€â”€ ShoppingListBuilder.cs
â”‚   â”‚   â””â”€â”€ BasketOptimizer.cs
â”‚   â”œâ”€â”€ Onboarding/
â”‚   â”‚   â””â”€â”€ OnboardingService.cs
â”‚   â”œâ”€â”€ Scheduling/
â”‚   â”‚   â””â”€â”€ DailyPlanningJob.cs
â”‚   â””â”€â”€ Models/
â”‚       â”œâ”€â”€ ConsumptionProfile.cs
â”‚       â”œâ”€â”€ ProductPattern.cs
â”‚       â”œâ”€â”€ ReplenishmentPrediction.cs
â”‚       â””â”€â”€ ProposedShoppingList.cs
â”‚
â”œâ”€â”€ SmartBasket.Parsers           # ĞŸĞ°Ñ€ÑĞµÑ€Ñ‹ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ²
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ IStoreParser.cs
â”‚   â”‚   â””â”€â”€ IWebViewContext.cs
â”‚   â”œâ”€â”€ Stores/
â”‚   â”‚   â”œâ”€â”€ SamokatParser.cs
â”‚   â”‚   â”œâ”€â”€ LavkaParser.cs
â”‚   â”‚   â””â”€â”€ KuperParser.cs
â”‚   â””â”€â”€ WebView/
â”‚       â””â”€â”€ WebViewContext.cs
â”‚
â””â”€â”€ SmartBasket.WPF               # UI
```

### 2.2 Ğ¡Ñ…ĞµĞ¼Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BRAIN MODULE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚   Onboarding     â”‚  "Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ ĞºĞ°Ğº Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ·Ğ°ĞºÑƒĞ¿Ğ°ĞµÑ‚ĞµÑÑŒ?"               â”‚
â”‚  â”‚   Service        â”‚  â†’ Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ConsumptionProfile         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚           â”‚                                                             â”‚
â”‚           â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Consumption    â”‚    â”‚  Replenishment   â”‚    â”‚  Shopping List   â”‚  â”‚
â”‚  â”‚   Analyzer       â”‚â”€â”€â”€â–¶â”‚  Predictor       â”‚â”€â”€â”€â–¶â”‚  Builder         â”‚  â”‚
â”‚  â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚  â”‚
â”‚  â”‚ Ğ’Ñ…Ğ¾Ğ´Ñ‹:           â”‚    â”‚ Ğ’Ñ…Ğ¾Ğ´Ñ‹:           â”‚    â”‚ Ğ’Ñ…Ğ¾Ğ´Ñ‹:           â”‚  â”‚
â”‚  â”‚ â€¢ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‡ĞµĞºĞ¾Ğ²  â”‚    â”‚ â€¢ ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹       â”‚    â”‚ â€¢ ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ   â”‚  â”‚
â”‚  â”‚ â€¢ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ        â”‚    â”‚ â€¢ ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ      â”‚    â”‚ â€¢ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸      â”‚  â”‚
â”‚  â”‚                  â”‚    â”‚   Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸        â”‚    â”‚                  â”‚  â”‚
â”‚  â”‚ Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹:          â”‚    â”‚                  â”‚    â”‚ Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹:          â”‚  â”‚
â”‚  â”‚ â€¢ ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹       â”‚    â”‚ Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹:          â”‚    â”‚ â€¢ Ğ§ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº       â”‚  â”‚
â”‚  â”‚   Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ    â”‚    â”‚ â€¢ ĞšĞ¾Ğ³Ğ´Ğ° ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑÑ â”‚    â”‚   ÑĞ¿Ğ¸ÑĞºĞ°         â”‚  â”‚
â”‚  â”‚ â€¢ Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°        â”‚    â”‚ â€¢ Urgency        â”‚    â”‚                  â”‚  â”‚
â”‚  â”‚ â€¢ ĞĞ±ÑŠÑ‘Ğ¼Ñ‹         â”‚    â”‚ â€¢ Confidence     â”‚    â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â–²                                               â”‚            â”‚
â”‚           â”‚                                               â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Smart Basket   â”‚                          â”‚  Basket          â”‚   â”‚
â”‚  â”‚   Database       â”‚                          â”‚  Optimizer       â”‚   â”‚
â”‚  â”‚                  â”‚                          â”‚                  â”‚   â”‚
â”‚  â”‚ â€¢ Receipts       â”‚                          â”‚ â€¢ Ğ“Ğ´Ğµ Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ    â”‚   â”‚
â”‚  â”‚ â€¢ Products       â”‚                          â”‚ â€¢ Ğ’ĞµÑ â‰¤ 30ĞºĞ³     â”‚   â”‚
â”‚  â”‚ â€¢ Purchases      â”‚                          â”‚ â€¢ ĞœĞ¸Ğ½. ÑÑƒĞ¼Ğ¼Ğ°     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â€¢ ĞšĞ¾Ğ»-Ğ²Ğ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² â”‚   â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚             â”‚
â”‚                                                         â–¼             â”‚
â”‚                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                                â”‚  Store Parsers   â”‚   â”‚
â”‚                                                â”‚                  â”‚   â”‚
â”‚                                                â”‚ â€¢ SearchAsync    â”‚   â”‚
â”‚                                                â”‚ â€¢ AddToCartAsync â”‚   â”‚
â”‚                                                â”‚ â€¢ GetCartUrl     â”‚   â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

### 3.1 ConsumptionAnalyzer

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº Ğ¸ Ğ²Ñ‹ÑĞ²Ğ»ÑÑ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ.

```csharp
public interface IConsumptionAnalyzer
{
    /// <summary>
    /// ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹
    /// </summary>
    Task<ConsumptionProfile> AnalyzeAsync(Guid userId, CancellationToken ct = default);
    
    /// <summary>
    /// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¿Ğ¾ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñƒ
    /// </summary>
    Task<ProductPattern?> GetPatternAsync(Guid userId, string productName, CancellationToken ct = default);
}
```

**Ğ§Ñ‚Ğ¾ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°:**

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ |
|---------|----------|--------|
| `AvgDaysBetweenPurchases` | Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°Ğ¼Ğ¸ | 6.5 Ğ´Ğ½ĞµĞ¹ |
| `StdDevDays` | Ğ Ğ°Ğ·Ğ±Ñ€Ğ¾Ñ (ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ) | 1.2 Ğ´Ğ½Ñ |
| `AvgQuantityPerPurchase` | Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¾Ğ±ÑŠÑ‘Ğ¼ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ | 2 ÑˆÑ‚ |
| `Confidence` | Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ĞºĞ¾Ğ»-Ğ²Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…) | 0.85 |
| `DataPoints` | Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ | 12 |

**Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚:** Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼Ğ°Ğ»Ğ¾ â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ñ‹ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼ + Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¾Ğ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³Ğ°.

---

### 3.2 ReplenishmentPredictor

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑÑ.

```csharp
public interface IReplenishmentPredictor
{
    /// <summary>
    /// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¼ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°Ğ¼
    /// </summary>
    Task<List<ReplenishmentPrediction>> PredictAllAsync(Guid userId, CancellationToken ct = default);
}
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ:**

```
BaseInterval = 6 Ğ´Ğ½ĞµĞ¹ (Ğ¸Ğ· Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°)
LastPurchaseQty = 3 ÑˆÑ‚ (Ğ² Ğ¿Ñ€Ğ¾ÑˆĞ»Ñ‹Ğ¹ Ñ€Ğ°Ğ· ĞºÑƒĞ¿Ğ¸Ğ» Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾Ğ³Ğ¾)
AvgQty = 2 ÑˆÑ‚

AdjustedInterval = 6 Ã— (3 / 2) = 9 Ğ´Ğ½ĞµĞ¹ (Ñ…Ğ²Ğ°Ñ‚Ğ¸Ñ‚ Ğ´Ğ¾Ğ»ÑŒÑˆĞµ)

DaysSinceLastPurchase = 7 Ğ´Ğ½ĞµĞ¹
RemainingDays = 9 - 7 = 2 Ğ´Ğ½Ñ

Urgency = Soon (1-2 Ğ´Ğ½Ñ)
```

**Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸:**

```csharp
public enum ReplenishmentUrgency
{
    Now,        // Ğ£Ğ¶Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑŒÑÑ (< 0 Ğ´Ğ½ĞµĞ¹)
    Soon,       // Ğ¡ĞºĞ¾Ñ€Ğ¾ ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑÑ (1-2 Ğ´Ğ½Ñ)
    Later,      // Ğ•Ñ‰Ñ‘ ĞµÑÑ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ (3-7 Ğ´Ğ½ĞµĞ¹)
    NotNeeded   // Ğ”Ğ¾Ğ»Ğ³Ğ¾ Ğ½Ğµ Ğ¿Ğ¾Ğ½Ğ°Ğ´Ğ¾Ğ±Ğ¸Ñ‚ÑÑ (> 7 Ğ´Ğ½ĞµĞ¹)
}
```

---

### 3.3 ShoppingListBuilder

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº ÑĞ¿Ğ¸ÑĞºĞ° Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº.

```csharp
public interface IShoppingListBuilder
{
    /// <summary>
    /// Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ·Ğ°ĞºÑƒĞ¿ĞºĞµ
    /// </summary>
    Task<ProposedShoppingList> BuildAsync(
        Guid userId,
        List<ReplenishmentPrediction> predictions,
        CancellationToken ct = default);
    
    /// <summary>
    /// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ² Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº (Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
    /// </summary>
    Task AddItemAsync(Guid listId, string productName, decimal quantity, string unit);
    
    /// <summary>
    /// ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº
    /// </summary>
    Task<ProposedShoppingList> ConfirmAsync(Guid listId);
}
```

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ² ÑĞ¿Ğ¸ÑĞ¾Ğº:**

```csharp
// Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ĞµÑĞ»Ğ¸:
predictions.Where(p => 
    p.Urgency <= ReplenishmentUrgency.Soon ||  // Ğ¡Ñ€Ğ¾Ñ‡Ğ½Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾
    (p.Urgency == ReplenishmentUrgency.Later && 
     daysSinceLastOrder >= preferredOrderFrequency)  // ĞŸĞ»Ğ°Ğ½Ğ¾Ğ²Ğ°Ñ Ğ·Ğ°ĞºÑƒĞ¿ĞºĞ°
)
```

---

### 3.4 BasketOptimizer

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ ĞµÑˆĞ¸Ñ‚ÑŒ Ğ“Ğ”Ğ• ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ â€” Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğµ Ğ¸Ğ»Ğ¸ Ñ€Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ.

```csharp
public interface IBasketOptimizer
{
    /// <summary>
    /// ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ
    /// </summary>
    Task<OptimizationResult> OptimizeAsync(
        ProposedShoppingList list,
        List<string> availableStores,
        UserPreferences preferences,
        CancellationToken ct = default);
}

public class OptimizationResult
{
    public List<StoreBasket> Baskets { get; set; }      // ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ Ğ¿Ğ¾ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ğ¼
    public decimal TotalCost { get; set; }              // ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°
    public string Strategy { get; set; }                // "single" / "split"
    public string Reasoning { get; set; }               // "Ğ’ÑÑ‘ Ğ² Ğ¡Ğ°Ğ¼Ğ¾ĞºĞ°Ñ‚Ğµ â€” Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ Ğ½Ğ° 5%"
}
```

**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

| Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° |
|---------|----------|--------|
| `Lazy` | Ğ£Ğ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ¾ | Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğµ Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ¹ Ñ†ĞµĞ½Ğ¾Ğ¹ |
| `Balanced` | Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ | Ğ Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ > 15% |
| `Aggressive` | Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ | Ğ Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ > 5% |
| `Maniac` | ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ | Ğ Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸ |

**ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ:**

```csharp
public class StoreConstraints
{
    public decimal MaxWeight { get; set; } = 30;         // ĞºĞ³
    public decimal MinOrderAmount { get; set; }          // ĞœĞ¸Ğ½. ÑÑƒĞ¼Ğ¼Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ°
    public decimal DeliveryFee { get; set; }             // Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°
    public decimal FreeDeliveryThreshold { get; set; }   // Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾ Ğ¾Ñ‚
}
```

---

### 3.5 OnboardingService

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ¸ ÑÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ.

```csharp
public interface IOnboardingService
{
    /// <summary>
    /// ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³ (AI-Ñ‡Ğ°Ñ‚)
    /// </summary>
    Task<OnboardingSession> StartAsync(Guid userId);
    
    /// <summary>
    /// ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    /// </summary>
    Task<OnboardingResponse> ProcessMessageAsync(Guid sessionId, string userMessage);
    
    /// <summary>
    /// Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ¾Ğ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³ Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
    /// </summary>
    Task<ConsumptionProfile> CompleteAsync(Guid sessionId);
}
```

**ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿:** ĞĞ´Ğ¸Ğ½ ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ»ÑƒÑ‡ÑˆĞµ Ğ´ĞµÑÑÑ‚Ğ¸ Ñ‚ÑƒĞ¿Ñ‹Ñ….

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°:**

```
AI: Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ² Ğ´Ğ²ÑƒÑ… ÑĞ»Ğ¾Ğ²Ğ°Ñ… â€” ĞºĞ°Ğº Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ·Ğ°ĞºÑƒĞ¿Ğ°ĞµÑ‚ĞµÑÑŒ?
    Ğ Ğ°Ğ· Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ·Ğ°ĞºĞ°Ğ·? Ğ˜Ğ»Ğ¸ Ğ¿Ğ¾ Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ?

User: Ğ Ğ°Ğ· Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ Ğ² ÑĞ°Ğ¼Ğ¾ĞºĞ°Ñ‚Ğµ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾. ĞœĞ¾Ğ»Ğ¾ĞºĞ¾, Ñ…Ğ»ĞµĞ±, ÑĞ¹Ñ†Ğ°, Ğ¾Ğ²Ğ¾Ñ‰Ğ¸.

AI: ĞŸĞ¾Ğ½ÑĞ»! Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğ¹?
    â€¢ ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ â€” Ñ€Ğ°Ğ· Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ
    â€¢ Ğ¥Ğ»ĞµĞ± â€” 2 Ñ€Ğ°Ğ·Ğ° Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ
    â€¢ Ğ¯Ğ¹Ñ†Ğ° â€” Ñ€Ğ°Ğ· Ğ² 10 Ğ´Ğ½ĞµĞ¹
    â€¢ ĞĞ²Ğ¾Ñ‰Ğ¸ â€” ĞºĞ°ĞºĞ¸Ğµ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾?

User: ĞšĞ°Ñ€Ñ‚Ğ¾ÑˆĞºĞ°, Ğ¼Ğ¾Ñ€ĞºĞ¾Ğ²ÑŒ, Ğ»ÑƒĞº â€” Ğ²ÑĞµĞ³Ğ´Ğ°. ĞŸĞ¾Ğ¼Ğ¸Ğ´Ğ¾Ñ€Ñ‹ Ğ»ĞµÑ‚Ğ¾Ğ¼ Ñ‡Ğ°Ñ‰Ğµ.

AI: ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ â€” Ğ²Ğ°Ğ¶Ğ½ĞµĞµ ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ¾ Ğ¸Ğ»Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ?

User: Ğ•ÑĞ»Ğ¸ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ° Ğ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ â€” Ñ€Ğ°ÑĞºĞ¸Ğ´Ğ°Ğ¹ Ğ¿Ğ¾ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ğ¼.

AI: ĞŸĞ¾Ğ½ÑĞ», Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ğ». ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°!
```

---

## 4. ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 4.1 ConsumptionProfile

```csharp
/// <summary>
/// ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
/// </summary>
public class ConsumptionProfile
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    
    // ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹ Ğ¸ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹
    public List<ProductPattern> Products { get; set; } = new();
    
    // ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ğ¼
    public List<string> PreferredStores { get; set; } = new();
    
    // Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ·Ğ°ĞºÑƒĞ¿Ğ¾Ğº
    public ShoppingFrequency ShoppingFrequency { get; set; }
    public bool AllowMidWeekTopUp { get; set; }
    
    // ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    public UserPreferences Preferences { get; set; } = new();
    
    // ĞœĞµÑ‚Ğ°
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    public DateTime? LastOnboardingAt { get; set; }
}

public enum ShoppingFrequency
{
    Daily,          // ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
    EveryFewDays,   // Ğ Ğ°Ğ· Ğ² 2-3 Ğ´Ğ½Ñ
    Weekly,         // Ğ Ğ°Ğ· Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ
    BiWeekly        // Ğ Ğ°Ğ· Ğ² 2 Ğ½ĞµĞ´ĞµĞ»Ğ¸
}
```

### 4.2 ProductPattern

```csharp
/// <summary>
/// ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°
/// </summary>
public class ProductPattern
{
    public Guid Id { get; set; }
    public Guid ProfileId { get; set; }
    
    // Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
    public string ProductName { get; set; }           // "ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ 2.5%"
    public string? Category { get; set; }             // "ĞœĞ¾Ğ»Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹"
    public List<string> Aliases { get; set; } = new(); // ["ĞœĞ¾Ğ»Ğ¾ĞºĞ¾", "ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ Ğ”Ğ¾Ğ¼Ğ¸Ğº"]
    
    // Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°
    public int FrequencyDays { get; set; }            // 7
    public double FrequencyStdDev { get; set; }       // 1.5
    
    // ĞĞ±ÑŠÑ‘Ğ¼
    public decimal DefaultQuantity { get; set; }      // 1
    public string Unit { get; set; }                  // "Ğ»"
    
    // Ğ¡ĞµĞ·Ğ¾Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    public string? SeasonalHint { get; set; }         // "summer", "winter", null
    
    // ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    public double Confidence { get; set; }            // 0.0 - 1.0
    public int DataPoints { get; set; }               // ĞºĞ¾Ğ»-Ğ²Ğ¾ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
    public DataSource Source { get; set; }            // ĞÑ‚ĞºÑƒĞ´Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    
    // Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    public DateTime? LastPurchaseDate { get; set; }
    public decimal? LastPurchaseQuantity { get; set; }
    
    public bool IsActive { get; set; } = true;        // ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ½ĞµÑ‚
}

public enum DataSource
{
    Onboarding,     // Ğ˜Ğ· Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°
    CategoryDefault,// Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
    Calculated,     // Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¾ Ğ¸Ğ· Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
    UserOverride    // ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ°Ğ´Ğ°Ğ» Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
}
```

### 4.3 ReplenishmentPrediction

```csharp
/// <summary>
/// ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑÑ
/// </summary>
public record ReplenishmentPrediction
{
    public string ProductName { get; init; }
    public string Category { get; init; }
    
    // Ğ”Ğ°Ñ‚Ñ‹
    public DateTime PredictedRunOutDate { get; init; }   // ĞšĞ¾Ğ³Ğ´Ğ° ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑÑ
    public DateTime RecommendedOrderDate { get; init; }  // ĞšĞ¾Ğ³Ğ´Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ
    public int DaysRemaining { get; init; }              // ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ´Ğ½ĞµĞ¹
    
    // ĞÑ†ĞµĞ½ĞºĞ°
    public ReplenishmentUrgency Urgency { get; init; }
    public double Confidence { get; init; }
    
    // Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ
    public decimal RecommendedQuantity { get; init; }
    public string Unit { get; init; }
    
    // ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ
    public string Reasoning { get; init; }  // "ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾ Ñ…Ğ²Ğ°Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° 6 Ğ´Ğ½ĞµĞ¹, Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾ 5"
}
```

### 4.4 ProposedShoppingList

```csharp
/// <summary>
/// ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº (Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº)
/// </summary>
public class ProposedShoppingList
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    
    // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    public ProposedListStatus Status { get; set; }
    
    // Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹
    public List<ProposedItem> Items { get; set; } = new();
    
    // Ğ”Ğ°Ñ‚Ñ‹
    public DateTime GeneratedAt { get; set; }
    public DateTime? ConfirmedAt { get; set; }
    public DateTime? ExecutedAt { get; set; }
    public DateTime ExpiresAt { get; set; }           // ĞšĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ñ‚ÑƒÑ…Ğ½ĞµÑ‚
    
    // Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    public List<StoreBasket>? Baskets { get; set; }   // ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
    
    // AI
    public string? AiReasoning { get; set; }
}

public class ProposedItem
{
    public Guid Id { get; set; }
    public Guid ListId { get; set; }
    
    public string ProductName { get; set; }
    public decimal Quantity { get; set; }
    public string Unit { get; set; }
    
    public ReplenishmentUrgency Urgency { get; set; }
    public string Reasoning { get; set; }
    
    public bool IsAutoAdded { get; set; }             // Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ°
    public bool IsConfirmed { get; set; } = true;     // ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ğ»
}

public enum ProposedListStatus
{
    Draft,          // Ğ–Ğ´Ñ‘Ñ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
    Confirmed,      // ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½, Ğ¸Ğ´Ñ‘Ñ‚ ÑĞ±Ğ¾Ñ€ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½
    Collecting,     // Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ñ†ĞµĞ½Ñ‹
    Ready,          // ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹, ÑÑÑ‹Ğ»ĞºĞ¸ ĞµÑÑ‚ÑŒ
    Completed,      // ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ» (Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¼ĞµÑ‚Ğ¸Ğ» ĞºĞ°Ğº Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹)
    Cancelled,      // ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½
    Expired         // ĞŸÑ€Ğ¾Ñ‚ÑƒÑ…
}
```

### 4.5 UserPreferences

```csharp
/// <summary>
/// ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
/// </summary>
public class UserPreferences
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    
    // Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
    public int MaxOrdersPerWeek { get; set; } = 2;
    
    // ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
    public OptimizationLevel OptimizationLevel { get; set; } = OptimizationLevel.Balanced;
    
    // Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
    public bool EnablePushNotifications { get; set; } = true;
    public TimeOnly MorningPushTime { get; set; } = new(9, 0);
    public TimeOnly AfternoonPushTime { get; set; } = new(13, 0);
    
    // ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ
    public decimal MaxWeightPerOrder { get; set; } = 30;
    public decimal? MaxBudgetPerWeek { get; set; }    // null = Ğ±ĞµĞ· Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¹
    
    // ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹
    public List<string> EnabledStores { get; set; } = new() { "samokat", "lavka", "kuper" };
    public string? PreferredStore { get; set; }       // ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ… Ñ€Ğ°Ğ²Ğ½Ñ‹Ñ…
}

public enum OptimizationLevel
{
    Lazy,           // Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ
    Balanced,       // Ğ Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ > 15%
    Aggressive,     // Ğ Ğ°ÑĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ > 5%
    Maniac          // Ğ›ÑĞ±Ğ°Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ·
}
```

---

## 5. Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ

### 5.1 ĞĞ¾Ñ‡Ğ½Ğ¾Ğ¹ job (03:00)

```csharp
public class DailyPlanningJob : IJob
{
    public async Task Execute(IJobExecutionContext context)
    {
        var users = await _userService.GetActiveUsersAsync();
        
        foreach (var user in users)
        {
            // 1. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‡ĞµĞºĞ¸)
            var profile = await _analyzer.AnalyzeAsync(user.Id);
            
            // 2. ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ
            var predictions = await _predictor.PredictAllAsync(user.Id);
            
            // 3. ĞÑƒĞ¶ĞµĞ½ Ğ»Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·?
            var urgentItems = predictions
                .Where(p => p.Urgency <= ReplenishmentUrgency.Soon)
                .ToList();
            
            var shouldPropose = 
                urgentItems.Count >= 3 ||
                urgentItems.Any(p => p.Urgency == ReplenishmentUrgency.Now) ||
                IsScheduledShoppingDay(user);
            
            if (shouldPropose)
            {
                // 4. Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº
                var list = await _builder.BuildAsync(user.Id, predictions);
                
                // 5. Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ÑƒÑˆ
                await _notifications.SchedulePushAsync(
                    user.Id,
                    user.Preferences.MorningPushTime,
                    $"ğŸ›’ ĞŸĞ¾Ñ€Ğ° Ğ·Ğ°ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒÑÑ! {urgentItems.Count} Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹"
                );
            }
        }
    }
}
```

### 5.2 Flow ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  03:00 â€” DailyPlanningJob                                               â”‚
â”‚  â””â”€â–º ĞĞ½Ğ°Ğ»Ğ¸Ğ· â†’ ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ â†’ Ğ§ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº â†’ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿ÑƒÑˆĞ°               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  09:00 â€” Ğ£Ñ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ push                                                  â”‚
â”‚  â””â”€â–º "ğŸ›’ ĞŸĞ¾Ñ€Ğ° Ğ·Ğ°ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒÑÑ! ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ Ğ¸ ÑĞ¹Ñ†Ğ° Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ"                  â”‚
â”‚      â””â”€â–º [ĞšĞ»Ğ¸Ğº] â†’ ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸ĞºĞ¾Ğ¼                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  13:00 â€” ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ¾Ñ‚Ñ€ĞµĞ°Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»)                             â”‚
â”‚  â””â”€â–º "ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾ Ğ·Ğ°ĞºÑƒĞ¿ĞºĞ¸. Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ³Ğ¾Ñ‚Ğ¾Ğ²"                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ â€” Ğ•ÑĞ»Ğ¸ Ñ‚Ğ°Ğº Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ğ»                              â”‚
â”‚  â””â”€â–º Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº Expired                                      â”‚
â”‚  â””â”€â–º ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ½Ğ¾Ñ‡ÑŒÑ                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. UI Flow

### 6.1 ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ Ğ·Ğ°ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒÑÑ                                    15 ÑĞ½Ğ²Ğ°Ñ€Ñ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ĞŸĞ¾Ñ…Ğ¾Ğ¶Ğµ, Ğ¿Ğ¾Ñ€Ğ° Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ°ÑÑ‹:                                         â”‚
â”‚                                                                         â”‚
â”‚  â˜‘ ĞœĞ¾Ğ»Ğ¾ĞºĞ¾ 2.5%        2 Ğ»     "Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ½Ğ° 6 Ğ´Ğ½ĞµĞ¹, Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾ 5"       [âˆ’][+]â”‚
â”‚  â˜‘ Ğ¯Ğ¹Ñ†Ğ° Ğ¡1            10 ÑˆÑ‚   "Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ¸ÑÑŒ 2 Ğ´Ğ½Ñ Ğ½Ğ°Ğ·Ğ°Ğ´"          [âˆ’][+]â”‚
â”‚  â˜‘ Ğ¥Ğ»ĞµĞ± Ğ±ĞµĞ»Ñ‹Ğ¹         1 ÑˆÑ‚    "Ğ±ĞµÑ€Ñ‘ÑˆÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 3 Ğ´Ğ½Ñ"              [âˆ’][+]â”‚
â”‚  â˜‘ ĞšĞ°Ñ€Ñ‚Ğ¾Ñ„ĞµĞ»ÑŒ          2 ĞºĞ³    "Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ½Ğ° 2 Ğ½ĞµĞ´ĞµĞ»Ğ¸"               [âˆ’][+]â”‚
â”‚  â˜ Ğ¡Ğ¼ĞµÑ‚Ğ°Ğ½Ğ°            â€”       (ÑƒĞ±Ñ€Ğ°Ğ» Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ)                     â”‚
â”‚                                                                         â”‚
â”‚  [+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€]                                                     â”‚
â”‚                                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                         â”‚
â”‚  ğŸ’¬ ĞœĞ¾Ğ¶ĞµÑ‚ ĞµÑ‰Ñ‘ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾?                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ¾Ğ³ÑƒÑ€Ñ†Ñ‹ Ğ¸ ÑĞ¼ĞµÑ‚Ğ°Ğ½Ñƒ                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚                              [ĞÑ‚Ğ¼ĞµĞ½Ğ°]  [Ğ’ÑÑ‘ Ğ²ĞµÑ€Ğ½Ğ¾, ÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ğ¹ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ â†’]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾! Ğ’Ğ¾Ñ‚ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹:                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ğŸ¥‡ Ğ¡Ğ°Ğ¼Ğ¾ĞºĞ°Ñ‚              â”‚  â”‚ Ğ¯Ğ½Ğ´ĞµĞºÑ.Ğ›Ğ°Ğ²ĞºĞ°            â”‚               â”‚
â”‚  â”‚                         â”‚  â”‚                         â”‚               â”‚
â”‚  â”‚     1,247 â‚½             â”‚  â”‚     1,312 â‚½             â”‚               â”‚
â”‚  â”‚     âœ“ Ğ²ÑĞµ 6 Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²     â”‚  â”‚     âœ“ Ğ²ÑĞµ 6 Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²     â”‚               â”‚
â”‚  â”‚     ğŸšš Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾        â”‚  â”‚     ğŸšš Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾        â”‚               â”‚
â”‚  â”‚                         â”‚  â”‚                         â”‚               â”‚
â”‚  â”‚  [ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ â†’]    â”‚  â”‚  [ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ â†’]    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                         â”‚
â”‚  ğŸ’¡ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ¡Ğ°Ğ¼Ğ¾ĞºĞ°Ñ‚ â€” Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ Ğ½Ğ° 65â‚½                                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ°Ğ¼Ğ¸

### 7.1 Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¿Ğ°Ñ€ÑĞµÑ€Ñ‹

| ĞŸĞ°Ñ€ÑĞµÑ€ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ |
|--------|--------|--------------|
| SamokatParser | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ² | SamokatParser.md |
| LavkaParser | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ² | LavkaParser.md |
| KuperParser | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ² | KuperParser.md |

### 7.2 Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Brain

```csharp
public class BasketOptimizer : IBasketOptimizer
{
    private readonly Dictionary<string, IStoreParser> _parsers;
    private readonly IWebViewContext _webViewContext;
    
    public async Task<OptimizationResult> OptimizeAsync(
        ProposedShoppingList list,
        List<string> stores,
        UserPreferences prefs,
        CancellationToken ct)
    {
        // 1. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ†ĞµĞ½Ñ‹ Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ğ¼ (Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾)
        var priceTasks = stores.Select(async store =>
        {
            var parser = _parsers[store];
            var items = new List<(ProposedItem Item, ProductSearchResult? Found)>();
            
            foreach (var item in list.Items.Where(i => i.IsConfirmed))
            {
                var results = await parser.SearchAsync(_webViewContext, item.ProductName, limit: 1, ct);
                items.Add((item, results.FirstOrDefault()));
            }
            
            return (Store: store, Items: items);
        });
        
        var allPrices = await Task.WhenAll(priceTasks);
        
        // 2. Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚
        return SelectOptimalBaskets(allPrices, prefs);
    }
}
```

---

## 8. Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

```sql
-- ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ
CREATE TABLE consumption_profiles (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL,
    preferred_stores TEXT,           -- JSON array
    shopping_frequency INTEGER,
    allow_midweek_topup INTEGER,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL,
    last_onboarding_at TEXT
);

-- ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°Ğ¼
CREATE TABLE product_patterns (
    id TEXT PRIMARY KEY,
    profile_id TEXT NOT NULL,
    product_name TEXT NOT NULL,
    category TEXT,
    aliases TEXT,                    -- JSON array
    frequency_days INTEGER NOT NULL,
    frequency_std_dev REAL,
    default_quantity REAL NOT NULL,
    unit TEXT NOT NULL,
    seasonal_hint TEXT,
    confidence REAL,
    data_points INTEGER,
    source INTEGER,
    last_purchase_date TEXT,
    last_purchase_quantity REAL,
    is_active INTEGER DEFAULT 1,
    FOREIGN KEY (profile_id) REFERENCES consumption_profiles(id)
);

-- ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸
CREATE TABLE proposed_shopping_lists (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL,
    status INTEGER NOT NULL,
    generated_at TEXT NOT NULL,
    confirmed_at TEXT,
    executed_at TEXT,
    expires_at TEXT,
    ai_reasoning TEXT
);

-- ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²
CREATE TABLE proposed_items (
    id TEXT PRIMARY KEY,
    list_id TEXT NOT NULL,
    product_name TEXT NOT NULL,
    quantity REAL NOT NULL,
    unit TEXT NOT NULL,
    urgency INTEGER,
    reasoning TEXT,
    is_auto_added INTEGER,
    is_confirmed INTEGER DEFAULT 1,
    FOREIGN KEY (list_id) REFERENCES proposed_shopping_lists(id)
);

-- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
CREATE TABLE user_preferences (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL UNIQUE,
    max_orders_per_week INTEGER DEFAULT 2,
    optimization_level INTEGER DEFAULT 1,
    enable_push INTEGER DEFAULT 1,
    morning_push_time TEXT DEFAULT '09:00',
    afternoon_push_time TEXT DEFAULT '13:00',
    max_weight_per_order REAL DEFAULT 30,
    max_budget_per_week REAL,
    enabled_stores TEXT,             -- JSON array
    preferred_store TEXT
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_patterns_profile ON product_patterns(profile_id);
CREATE INDEX idx_proposed_user ON proposed_shopping_lists(user_id);
CREATE INDEX idx_proposed_status ON proposed_shopping_lists(status);
```

---

## 9. Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```xml
<!-- Brain module -->
<PackageReference Include="Quartz" Version="3.8.0" />  <!-- Scheduler -->
<PackageReference Include="Microsoft.ML" Version="3.0.0" />  <!-- ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ğ¾Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ -->

<!-- Notifications (WPF) -->
<PackageReference Include="Microsoft.Toolkit.Uwp.Notifications" Version="7.1.3" />

<!-- AI (Ğ´Ğ»Ñ Ğ¾Ğ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³Ğ° Ğ¸ reasoning) -->
<PackageReference Include="Anthropic.SDK" Version="..." />  <!-- Ğ¸Ğ»Ğ¸ ÑĞ²Ğ¾Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ -->
```

---

## 10. TODO / Roadmap

### Phase 1: MVP
- [ ] ConsumptionAnalyzer (Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²)
- [ ] ReplenishmentPredictor (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ)
- [ ] ShoppingListBuilder (Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº ÑĞ¿Ğ¸ÑĞºĞ°)
- [ ] UI Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ°/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ¿Ğ¸ÑĞºĞ°
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ°Ğ¼Ğ¸ (ÑĞ±Ğ¾Ñ€ Ñ†ĞµĞ½)

### Phase 2: Ğ£Ğ¼Ğ½ĞµĞµ
- [ ] OnboardingService (AI-Ñ‡Ğ°Ñ‚)
- [ ] BasketOptimizer (ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
- [ ] Push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

### Phase 3: ĞĞ²Ñ‚Ğ¾Ğ¿Ğ¸Ğ»Ğ¾Ñ‚
- [ ] Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ job
- [ ] ĞĞ²Ñ‚Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½
- [ ] Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹ (Ñ‡Ñ‚Ğ¾ ÑÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ»Ğ¸)
- [ ] Ğ¡ĞµĞ·Ğ¾Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ

### Phase 4: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ
- [ ] Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´
- [ ] Ğ£Ñ‡Ñ‘Ñ‚ Ğ°ĞºÑ†Ğ¸Ğ¹
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ÑƒĞ¼Ğ½Ñ‹Ğ¼ Ğ´Ğ¾Ğ¼Ğ¾Ğ¼ (Ñ…Ğ¾Ğ»Ğ¾Ğ´Ğ¸Ğ»ÑŒĞ½Ğ¸Ğº?)
- [ ] ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ

---

## 11. ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹

1. **ĞšĞ°Ğº Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑÑ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ» Ğ·Ğ°ĞºĞ°Ğ·?**
   - Ğ ÑƒÑ‡Ğ½Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"?
   - ĞŸĞ°Ñ€ÑĞ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‡ĞµĞºĞ¸ Ğ¸ ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑÑ‚ÑŒ?

2. **ĞšĞ°Ğº Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ "Ğ½Ğµ Ğ½Ğ°ÑˆÑ‘Ğ» Ñ‚Ğ¾Ğ²Ğ°Ñ€"?**
   - ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñƒ?
   - Ğ¡Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ?

3. **Multi-user (ÑĞµĞ¼ÑŒÑ)?**
   - ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ?
   - Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ñ merge?

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒÑÑ Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ Ğ¿Ñ€Ğ¾Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹.*
